<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>day9-字符串的改动</title>
</head>
<body>
    <script>
        // 识别字符串的方法

        // 1.includes() startsWith() endsWith()

        // 自从 JS 语言被使用，开发者们就使用 indexOf() 方法在字符串内识别子字符串。 ES6 包含了以下三个方法来满足这类需求：
        // includes() 方法，若给定文本存在于字符串中，会返回 true ，否则返回 false ；
        // startsWith() 方法，若给定文本出现在字符串起始处，返回 true ，否则返回 false ；
        // endsWith() 方法，若给定文本出现在字符串结尾处，返回 true ，否则返回 false

        // 每个方法都接受两个参数：需要搜索的文本，以及可选的搜索起始位置索引。
        // 当提供了第二个参数时， includes() 与 startsWith() 方法会从该索引位置开始尝试匹配；
        // 而 endsWith() 方法则会将该位置减去需搜索文本的长度，在计算出的位置尝试匹配。
        // 若未提供第二个参数， includes() 与 startsWith() 方法会从字符串起始处开始查找，而 endsWith() 方法的查找则在尾部进行。
        // 第二个参数实际上缩小了搜索的范围。以下是使用这些方法的演示：

        var msg = "Hello world!";

        console.log(msg.startsWith("Hello"));       // true
        console.log(msg.endsWith("!"));             // true
        console.log(msg.includes("o"));             // true

        console.log(msg.startsWith("o"));           // false
        console.log(msg.endsWith("world!"));        // true
        console.log(msg.includes("x"));             // false

        console.log(msg.startsWith("o", 4));        // true
        console.log(msg.endsWith("o", 8));          // true
        console.log(msg.includes("o", 8));          // false
        // 前六次调用没有使用第二个参数，因此它们在必要情况下会搜索整个字符串。
        // 最后三次调用只检查了字符串的一部分：调用 msg.startsWith("o", 4) 从 msg 字符串的索引位置 4 （即 "Hello" 中的 "o" ）开始尝试匹配；
        // 调用 msg.endsWith("o", 8) 会在位置 7 进行匹配尝试，因为需要将参数 8 减去字符串 "o" 的长度 1 ；
        // 而调用 msg.includes("o", 8) 则从索引位置 8 开始尝试匹配，也就是 "world" 中的 "r" 。

        // 如果向 startsWith() 、 endsWith() 或 includes() 方法传入了正则表达式而不是字符串，会抛出错误。
        // 这与 indexOf() 以及 lastIndexOf() 方法的表现形成了反差，它们会将正则表达式转换为字符串并搜索它。

        // 2.repeat()

        // ES6 还为字符串添加了一个 repeat() 方法，它接受一个参数作为字符串的重复次数，返回一个将初始字符串重复指定次数的新字符串
        console.log("x".repeat(3));         // "xxx"
        console.log("hello".repeat(2));     // "hellohello"
        console.log("abc".repeat(4));       // "abcabcabcabc"
        console.log("na".repeat(0));        // ""

        // 参数如果是小数，会被取整。
        'na'.repeat(2.9) // "nana"

        // 如果repeat的参数是负数或者Infinity，会报错。
        'na'.repeat(Infinity)
        // RangeError
        'na'.repeat(-1)
        // RangeError

        // 但是，如果参数是0到 - 1之间的小数，则等同于0，这是因为会先进行取整运算。0到 - 1之间的小数，取整以后等于 - 0，repeat视同为0。
        'na'.repeat(-0.9) // ""

        // 参数NaN等同于0。
        'na'.repeat(NaN) // ""

        // 如果repeat的参数是字符串，则会先转换成数字。
        'na'.repeat('na') // ""
        'na'.repeat('3') // "nanana"
    </script>
</body>
</html>